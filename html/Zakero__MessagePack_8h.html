<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zakero&#39;s C++ Header Libraries: Zakero_MessagePack.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zakero&#39;s C++ Header Libraries
   </div>
   <div id="projectbrief">A collection of reusable C++ libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Zakero_MessagePack.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Zakero MessagePack.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
Include dependency graph for Zakero_MessagePack.h:</div>
<div class="dyncontent">
<div class="center"><img src="Zakero__MessagePack_8h__incl.png" border="0" usemap="#aZakero__MessagePack_8h" alt=""/></div>
<map name="aZakero__MessagePack_8h" id="aZakero__MessagePack_8h">
<area shape="rect" title="Zakero MessagePack." alt="" coords="116,5,279,32"/>
<area shape="rect" title=" " alt="" coords="5,80,67,107"/>
<area shape="rect" title=" " alt="" coords="91,80,146,107"/>
<area shape="rect" title=" " alt="" coords="171,80,224,107"/>
<area shape="rect" title=" " alt="" coords="249,80,306,107"/>
<area shape="rect" title=" " alt="" coords="330,80,414,107"/>
</map>
</div>
</div>
<p><a href="Zakero__MessagePack_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzakero_1_1MessagePack.html">zakero::MessagePack</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structObject.html" title="A Data Object.">Object</a> and Data Serialization.  <a href="classzakero_1_1MessagePack.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab9f8b2acde372250a96dbf6f61a3cacf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Zakero__MessagePack_8h.html#ab9f8b2acde372250a96dbf6f61a3cacf">ZAKERO_DISABLE_IMPLICIT_CASTS</a>(func_name_)</td></tr>
<tr class="memdesc:ab9f8b2acde372250a96dbf6f61a3cacf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Don't allow implicit parameter conversion.  <a href="Zakero__MessagePack_8h.html#ab9f8b2acde372250a96dbf6f61a3cacf">More...</a><br /></td></tr>
<tr class="separator:ab9f8b2acde372250a96dbf6f61a3cacf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab72f6c6d597cf5d79b3f39e187143863"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Zakero__MessagePack_8h.html#ab72f6c6d597cf5d79b3f39e187143863">ZAKERO_MESSAGEPACK_IMPLEMENTATION</a></td></tr>
<tr class="memdesc:ab72f6c6d597cf5d79b3f39e187143863"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activate the implementation code.  <a href="Zakero__MessagePack_8h.html#ab72f6c6d597cf5d79b3f39e187143863">More...</a><br /></td></tr>
<tr class="separator:ab72f6c6d597cf5d79b3f39e187143863"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Format Value Masks</h2></td></tr>
<tr class="memitem:ac6ecbeef38082c33731c971a393cefe1"><td class="memItemLeft" align="right" valign="top"><a id="ac6ecbeef38082c33731c971a393cefe1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Zakero__MessagePack_8h.html#ac6ecbeef38082c33731c971a393cefe1">X</a>(type_,  id_,  mask_,  text_)</td></tr>
<tr class="memdesc:ac6ecbeef38082c33731c971a393cefe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert ZAKERO_MESSAGEPACK__FORMAT_DATA into code. <br /></td></tr>
<tr class="separator:ac6ecbeef38082c33731c971a393cefe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6ecbeef38082c33731c971a393cefe1"><td class="memItemLeft" align="right" valign="top"><a id="ac6ecbeef38082c33731c971a393cefe1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Zakero__MessagePack_8h.html#ac6ecbeef38082c33731c971a393cefe1">X</a>(type_,  id_,  mask_,  text_)</td></tr>
<tr class="memdesc:ac6ecbeef38082c33731c971a393cefe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert ZAKERO_MESSAGEPACK__FORMAT_DATA into code. <br /></td></tr>
<tr class="separator:ac6ecbeef38082c33731c971a393cefe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6ecbeef38082c33731c971a393cefe1"><td class="memItemLeft" align="right" valign="top"><a id="ac6ecbeef38082c33731c971a393cefe1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Zakero__MessagePack_8h.html#ac6ecbeef38082c33731c971a393cefe1">X</a>(type_,  id_,  mask_,  text_)</td></tr>
<tr class="memdesc:ac6ecbeef38082c33731c971a393cefe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert ZAKERO_MESSAGEPACK__FORMAT_DATA into code. <br /></td></tr>
<tr class="separator:ac6ecbeef38082c33731c971a393cefe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="classzakero_1_1MessagePack.html">API</a>   </td><td class="markdownTableBodyNone"><a class="el" href="Zakero__MessagePack_8h.html#zakero_messagepack_deps">Dependencies</a>   </td><td class="markdownTableBodyNone"><a class="el" href="Zakero__MessagePack_8h.html#zakero_messagepack_tldr">TL;DR</a>   </td><td class="markdownTableBodyNone"><a class="el" href="Zakero__MessagePack_8h.html#zakero_messagepack_what">What Is It?</a>   </td><td class="markdownTableBodyNone"><a class="el" href="Zakero__MessagePack_8h.html#zakero_messagepack_whys">Why Use It?</a>   </td><td class="markdownTableBodyNone"><a class="el" href="Zakero__MessagePack_8h.html#zakero_messagepack_hows">How To Use It?</a>   </td><td class="markdownTableBodyNone"><a class="el" href="Zakero__MessagePack_8h.html#zakero_messagepack_vers">Version</a>   </td></tr>
</table>
<p>The <em>Zakero_MessagePack</em> will serialize and deserialize data using the MessagePack specification.</p>
<p><a class="anchor" id="zakero_messagepack_deps"></a></p><dl class="section user"><dt>Dependencies</dt><dd><ul>
<li>None </li>
</ul>
</dd></dl>
<p><a class="anchor" id="zakero_messagepack_tldr"></a></p><dl class="section user"><dt>TL;DR:</dt><dd><p class="startdd">This library makes it very easy to use the MessagePack data format.</p>
<p class="enddd">To use:</p><ol type="1">
<li>Add the implementation to a source code file: <div class="fragment"><div class="line"><span class="preprocessor">#define ZAKERO_MESSAGEPACK_IMPLEMENTATION</span></div>
<div class="line"><span class="preprocessor">#include &quot;Zakero_MessagePack.h&quot;</span></div>
</div><!-- fragment --></li>
<li>Add the library to where it is used: <div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Zakero__MessagePack_8h.html">Zakero_MessagePack.h</a>&quot;</span></div>
<div class="ttc" id="aZakero__MessagePack_8h_html"><div class="ttname"><a href="Zakero__MessagePack_8h.html">Zakero_MessagePack.h</a></div><div class="ttdoc">Zakero MessagePack.</div></div>
</div><!-- fragment --> </li>
</ol>
</dd></dl>
<p><a class="anchor" id="zakero_messagepack_what"></a></p><dl class="section user"><dt>What Is It?</dt><dd>The <em>Zakero_MessagePack</em> library provides a way to serialize data for storage or transport over a network. Deserialization is also available so that the data may be accessed. The MessagePack specification provides a format that allows many different types of data to be packed with very little overhead. </dd></dl>
<p><a class="anchor" id="zakero_messagepack_whys"></a></p><dl class="section user"><dt>Why Use It?</dt><dd><p class="startdd">There are many libraries available to do the same thing, however the <em>Zakero_MessagePack</em> library offers the following:</p>
<p class="interdd"><b>Benefits</b></p><ul>
<li>Single Header Library</li>
<li>Small compile size</li>
<li>Easy to add data</li>
<li>Access to existing data</li>
<li>Modify existing data</li>
</ul>
<p class="interdd"><b>Draw Backs</b></p><ul>
<li>Memory Usage: Serialization makes a copy of the contents</li>
<li>No C++ iterators, must use traditional C-Style loops</li>
</ul>
<p class="enddd">Instead of attempting to interface with other libraries or provide a dynamic interface, basic C++ types are used. It is expected that this approach will make using the library with other code bases easier and less volatile. </p>
</dd></dl>
<p><a class="anchor" id="zakero_messagepack_hows"></a></p><dl class="section user"><dt>How To Use It?</dt><dd><p class="startdd"><b>Step 0</b></p>
<p class="interdd">Your compiler must support at least the C++20 standard. The location of the <code>Zakero_*.h</code> header files <em>must</em> be in your compiler's include path.</p>
<p class="interdd"><b>Step 1</b></p>
<p class="interdd">The first step is to select which C++ source code file will contain the <em>Zakero MessagePack</em> implementation. Once the location has been determined, add the following to that file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define ZAKERO_MESSAGEPACK_IMPLEMENTATION</span></div>
<div class="line"><span class="preprocessor">#include &quot;Zakero_MessagePack.h&quot;</span></div>
</div><!-- fragment --><p class="interdd">The macro <a class="el" href="Zakero__MessagePack_8h.html#ab72f6c6d597cf5d79b3f39e187143863">ZAKERO_MESSAGEPACK_IMPLEMENTATION</a> tells the header file to include the implementation of the MessagePack.</p>
<p class="interdd">In all other files that will use the MessagePack, they need to include the header.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Zakero__MessagePack_8h.html">Zakero_MessagePack.h</a>&quot;</span></div>
</div><!-- fragment --><p class="interdd"><b>Step 2</b></p>
<p class="interdd">After creating an instance of <a class="el" href="classzakero_1_1MessagePack.html">MessagePack</a>, it needs to be populated with data. There are two options to do this:</p>
<p class="interdd"><em>Add data manually</em> </p><div class="fragment"><div class="line"><a class="code" href="classzakero_1_1MessagePack.html">zakero::MessagePack</a> message_pack;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">size_t</span> text;</div>
<div class="line">message_pack.<a class="code" href="classzakero_1_1MessagePack.html#a1dba350a561d2ce1714aba9b0480f4a2">append</a>(uint64_t(42));</div>
<div class="line">message_pack.<a class="code" href="classzakero_1_1MessagePack.html#a1dba350a561d2ce1714aba9b0480f4a2">append</a>(<span class="keyword">true</span>);</div>
<div class="line">message_pack.<a class="code" href="classzakero_1_1MessagePack.html#a1dba350a561d2ce1714aba9b0480f4a2">append</a>(<span class="stringliteral">&quot;Hello, World!&quot;</span>, &amp;text);</div>
<div class="ttc" id="aclasszakero_1_1MessagePack_html"><div class="ttname"><a href="classzakero_1_1MessagePack.html">zakero::MessagePack</a></div><div class="ttdoc">Object and Data Serialization.</div><div class="ttdef"><b>Definition:</b> Zakero_MessagePack.h:221</div></div>
<div class="ttc" id="aclasszakero_1_1MessagePack_html_a1dba350a561d2ce1714aba9b0480f4a2"><div class="ttname"><a href="classzakero_1_1MessagePack.html#a1dba350a561d2ce1714aba9b0480f4a2">zakero::MessagePack::append</a></div><div class="ttdeci">void append(const bool, size_t *const =nullptr) noexcept</div><div class="ttdoc">Append a boolean value.</div><div class="ttdef"><b>Definition:</b> Zakero_MessagePack.h:511</div></div>
</div><!-- fragment --><p class="interdd"><em>Deserialize data</em> </p><div class="fragment"><div class="line">std::vector&lt;uint8_t&gt; data = load_data();</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classzakero_1_1MessagePack.html">zakero::MessagePack</a> message_pack;</div>
<div class="line">message_pack.<a class="code" href="classzakero_1_1MessagePack.html#af67a38e85db20b0a1bbafcdfb3b7b28a">deserialize</a>(data);</div>
<div class="ttc" id="aclasszakero_1_1MessagePack_html_af67a38e85db20b0a1bbafcdfb3b7b28a"><div class="ttname"><a href="classzakero_1_1MessagePack.html#af67a38e85db20b0a1bbafcdfb3b7b28a">zakero::MessagePack::deserialize</a></div><div class="ttdeci">void deserialize(const std::vector&lt; uint8_t &gt; &amp;) noexcept</div><div class="ttdoc">Deserialize MessagePack data.</div><div class="ttdef"><b>Definition:</b> Zakero_MessagePack.h:2148</div></div>
</div><!-- fragment --><p class="interdd">The data in the MessagePack can be modified: </p><div class="fragment"><div class="line">message_pack.<a class="code" href="classzakero_1_1MessagePack.html#a1115758a7ade9113114946697fbef742">object</a>(text).string = <span class="stringliteral">&quot;Good Bye!&quot;</span>;</div>
<div class="ttc" id="aclasszakero_1_1MessagePack_html_a1115758a7ade9113114946697fbef742"><div class="ttname"><a href="classzakero_1_1MessagePack.html#a1115758a7ade9113114946697fbef742">zakero::MessagePack::object</a></div><div class="ttdeci">Object &amp; object(const size_t index) noexcept</div><div class="ttdoc">Access a data object.</div><div class="ttdef"><b>Definition:</b> Zakero_MessagePack.h:2081</div></div>
</div><!-- fragment --><p class="enddd">Then the MessagePack can be (re)serialized: </p><div class="fragment"><div class="line">data = message_pack.<a class="code" href="classzakero_1_1MessagePack.html#aa858e24d74421d04dd278855e644db67">serialize</a>();</div>
<div class="line"> </div>
<div class="line">save_data(data);</div>
<div class="ttc" id="aclasszakero_1_1MessagePack_html_aa858e24d74421d04dd278855e644db67"><div class="ttname"><a href="classzakero_1_1MessagePack.html#aa858e24d74421d04dd278855e644db67">zakero::MessagePack::serialize</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; serialize() noexcept</div><div class="ttdoc">Serialize MessagePack data.</div><div class="ttdef"><b>Definition:</b> Zakero_MessagePack.h:2387</div></div>
</div><!-- fragment --> </dd></dl>
<p><a class="anchor" id="zakero_messagepack_vers"></a></p><dl class="section user"><dt>Version</dt><dd><b>v0.1.0</b><ul>
<li>The initial implementation </li>
</ul>
</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd><a href="https://www.mozilla.org/en-US/MPL/2.0/">Mozilla Public License v2</a></dd></dl>
<dl class="section author"><dt>Author</dt><dd>Andrew "Zakero" Moore<ul>
<li>Original Author </li>
</ul>
</dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab9f8b2acde372250a96dbf6f61a3cacf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f8b2acde372250a96dbf6f61a3cacf">&#9670;&nbsp;</a></span>ZAKERO_DISABLE_IMPLICIT_CASTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZAKERO_DISABLE_IMPLICIT_CASTS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">func_name_</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When passing a value to a function's parameter which does not have a matching type, the compiler will try to inject code to convert the value into the function's expected type. Usually, this is fine. But in some instances can lead to very subtle bugs. Placing the function name in this macro will prevent the compiler from doing this automatic type conversion.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func_name_</td><td>The name of the function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>Move to Zakero_Base </dd></dl>

</div>
</div>
<a id="ab72f6c6d597cf5d79b3f39e187143863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab72f6c6d597cf5d79b3f39e187143863">&#9670;&nbsp;</a></span>ZAKERO_MESSAGEPACK_IMPLEMENTATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZAKERO_MESSAGEPACK_IMPLEMENTATION</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defining this macro will cause the <a class="el" href="classzakero_1_1MessagePack.html" title="Object and Data Serialization.">zakero::MessagePack</a> implementation to be included. This should only be done once, since compiler and/or linker errors will typically be generated if more than a single implementation is found.</p>
<dl class="section note"><dt>Note</dt><dd>It does not matter if the macro is given a value or not, only its existence is checked. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
